# Resumo da Aula ‚Äì Criando nosso pr√≥prio MCP Server

## Objetivo
Criar um **MCP Server** funcional usando a biblioteca oficial open source da Anthropic, para expor as mesmas ferramentas da nossa secret√°ria anterior, mas agora de forma **padronizada via protocolo MCP**.

## Configura√ß√£o inicial do projeto

1. **Cria√ß√£o do projeto Node.js + TypeScript**  
   ```bash
   npm init -y
   npm install model-context-protocol-sdk
   npx tsc --init
   ```

2. **Configura√ß√£o do `tsconfig.json`** (recomenda√ß√µes da Anthropic)  
   - `target: "ES2022"`  
   - `module: "node16"`  
   - `moduleResolution: "node16"`

## Estrutura b√°sica do MCP Server (`index.ts`)

```ts
import { MCPServer } from "model-context-protocol-sdk/server/mcp";
import { StdioServerTransport } from "model-context-protocol-sdk/server/transport/stdio";

// Instancia o servidor
const server = new MCPServer({
  name: "secretaria",        // Nome do servidor
  version: "0.0.1",          // Vers√£o
  capabilities: {
    tools: []                // Por enquanto vazio ‚Äî vamos adicionar tools
  }
});

// Transporte via STDIO (padr√£o para comunica√ß√£o local com IAs)
const transport = new StdioServerTransport();

// Conecta o servidor ao transporte
await server.connect(transport);

// Log de inicializa√ß√£o (usar console.error para n√£o interferir no protocolo)
console.error("MCP Server funcionando!");
```

## Pontos importantes destacados pelo professor

- **Por que TypeScript?**  
  Porque o MCP usa fortemente **tipos** para definir par√¢metros de entrada/sa√≠da das ferramentas ‚Üí TypeScript torna isso natural e seguro (sem precisar descrever tipos manualmente como fizemos no agente secret√°ria).

- **N√£o usar `console.log`**  
  O output do servidor √© feito via **STDIO** (protocolo bin√°rio).  
  Qualquer `console.log` pode corromper a comunica√ß√£o.  
  ‚Üí Use `console.error` apenas para logs de depura√ß√£o.

- **StdioServerTransport**  
  √â o transporte padr√£o para servidores locais.  
  Permite que uma IA (como o Gemini ou Claude) se conecte diretamente ao processo via pipe (stdin/stdout).

## Compila√ß√£o e execu√ß√£o
```bash
npx tsc                  # Compila para index.js
node index.js            # Executa ‚Üí "MCP Server funcionando!"
```

## Status atual
- Servidor MCP criado e rodando corretamente  
- Ainda sem ferramentas (capabilities.tools vazio)  
- Pronto para come√ßar a adicionar **tools** via `server.tool(...)`  
- Pr√≥ximo passo: declarar as mesmas ferramentas da secret√°ria (getTodayDate, getEvents, scheduleEvent, etc.) como **MCP tools**, aproveitando os tipos do TypeScript

## Por que isso √© poderoso?
- Uma vez que as ferramentas estejam expostas via MCP:  
  - **Qualquer IA** que suporte MCP (Claude, Gemini com suporte futuro, etc.) poder√° us√°-las automaticamente  
  - N√£o precisa mais declarar manualmente as fun√ß√µes no prompt ou na API  
  - O cat√°logo de ferramentas √© descoberto dinamicamente pelo protocolo

Estamos construindo a vers√£o **moderna e padronizada** da nossa secret√°ria ‚Äî agora falando a l√≠ngua universal dos agentes de IA!  

Pr√≥ximo passo: adicionar as primeiras tools ao servidor usando `server.tool()`! üöÄ